name: Download Debian Stable Backports Docker Image

on:
  workflow_dispatch:

jobs:
  download:
    name: Download and Save Image as TAR
    runs-on: ubuntu-latest

    steps:
      - name: ðŸ”§ Install skopeo
        run: |
          sudo apt update -y
          sudo apt install -y skopeo

      - name: ðŸ“¦ Create output directory
        run: mkdir -p output

      - name: ðŸ“¥ Pull and save debian:stable-backports as TAR
        run: |
          IMAGE="debian:stable-backports"
          OUTPUT_PATH="output/debian-stable-backports.tar"
          echo "Downloading $IMAGE and saving as $OUTPUT_PATH"
          skopeo copy docker://$IMAGE docker-archive:$OUTPUT_PATH

      - name: ðŸ“¤ Upload TAR file as artifact
        uses: actions/upload-artifact@v4
        with:
          name: debian-stable-backports-image
          path: output/debian-stable-backports.tar
