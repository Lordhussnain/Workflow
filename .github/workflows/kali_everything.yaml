name: Download Kali Linux Everything Docker Image

on:
  workflow_dispatch:

jobs:
  download:
    name: Download and Save Image as TAR
    runs-on: ubuntu-latest

    steps:
      - name: ðŸ”§ Install skopeo
        run: |
          sudo apt update -y
          sudo apt install -y skopeo

      - name: ðŸ“¦ Create output directory
        run: mkdir -p output

      - name: ðŸ“¥ Pull and save oytunistrator/kali-linux-everything as TAR
        run: |
          IMAGE="oytunistrator/kali-linux-everything"
          OUTPUT_PATH="output/kali-linux-everything.tar"
          echo "Downloading $IMAGE and saving as $OUTPUT_PATH"
          skopeo copy docker://$IMAGE docker-archive:$OUTPUT_PATH

      - name: ðŸ“¤ Upload TAR file as artifact
        uses: actions/upload-artifact@v4
        with:
          name: kali-linux-everything-image
          path: output/kali-linux-everything.tar
